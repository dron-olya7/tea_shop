"use strict";(self.webpackChunktea_shop=self.webpackChunktea_shop||[]).push([[342],{1342:(S,d,o)=>{o.r(d),o.d(d,{CreateOrderModule:()=>D});var c=o(6895),i=o(646),n=o(433),u=o(8256),_=o(6275),f=o(2845);function g(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e."),u.qZA())}function C(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b."),u.qZA())}function v(t,r){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,g,2,0,"span",27),u.YNc(2,C,2,0,"span",27),u.qZA()),2&t){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==e.name||null==e.name.errors?null:e.name.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.name||null==e.name.errors?null:e.name.errors.lettersOnly)}}function h(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430."),u.qZA())}function Z(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b."),u.qZA())}function x(t,r){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,h,2,0,"span",27),u.YNc(2,Z,2,0,"span",27),u.qZA()),2&t){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.lettersOnly)}}function A(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d."),u.qZA())}function O(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 11 \u0446\u0438\u0444\u0440."),u.qZA())}function T(t,r){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,A,2,0,"span",27),u.YNc(2,O,2,0,"span",27),u.qZA()),2&t){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.phoneInvalid)}}function y(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u0421\u0442\u0440\u0430\u043d\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430."),u.qZA())}function N(t,r){1&t&&(u.TgZ(0,"span",28),u._uU(1,"\u041f\u043e\u043b\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b."),u.qZA())}function b(t,r){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,y,2,0,"span",27),u.YNc(2,N,2,0,"span",27),u.qZA()),2&t){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==e.country||null==e.country.errors?null:e.country.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.country||null==e.country.errors?null:e.country.errors.lettersOnly)}}function q(t,r){1&t&&(u.TgZ(0,"small",28),u._uU(1,"\u0410\u0434\u0440\u0435\u0441 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d."),u.qZA())}function F(t,r){1&t&&(u.TgZ(0,"small",28),u._uU(1,"\u0410\u0434\u0440\u0435\u0441 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u043f\u0440\u043e\u0431\u0435\u043b\u044b, '-' \u0438 '/'."),u.qZA())}function I(t,r){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,q,2,0,"small",27),u.YNc(2,F,2,0,"small",27),u.qZA()),2&t){const e=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null==e.address||null==e.address.errors?null:e.address.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.address||null==e.address.errors?null:e.address.errors.addressInvalid)}}function E(t,r){if(1&t&&(u.TgZ(0,"div",29),u._uU(1),u.qZA()),2&t){const e=u.oxw(2);u.xp6(1),u.hij(" ",e.errorMessage," ")}}function B(t,r){if(1&t){const e=u.EpF();u.TgZ(0,"div")(1,"h2",4),u._uU(2,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),u.qZA(),u.TgZ(3,"form",5),u.NdJ("ngSubmit",function(){u.CHM(e);const a=u.oxw();return u.KtG(a.onSubmit())}),u.TgZ(4,"div",6)(5,"label",7),u._uU(6,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0447\u0430\u044f"),u.qZA(),u._UZ(7,"input",8),u.qZA(),u.TgZ(8,"div",6)(9,"label",9),u._uU(10,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),u.qZA(),u._UZ(11,"textarea",10),u.qZA(),u.TgZ(12,"div",6)(13,"label",11),u._uU(14,"\u0418\u043c\u044f"),u.qZA(),u._UZ(15,"input",12),u.YNc(16,v,3,2,"div",13),u.qZA(),u.TgZ(17,"div",6)(18,"label",14),u._uU(19,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),u.qZA(),u._UZ(20,"input",15),u.YNc(21,x,3,2,"div",13),u.qZA(),u.TgZ(22,"div",6)(23,"label",16),u._uU(24,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),u.qZA(),u._UZ(25,"input",17),u.YNc(26,T,3,2,"div",13),u.qZA(),u.TgZ(27,"div",6)(28,"label",18),u._uU(29,"\u0421\u0442\u0440\u0430\u043d\u0430"),u.qZA(),u._UZ(30,"input",19),u.YNc(31,b,3,2,"div",13),u.qZA(),u.TgZ(32,"div",6)(33,"label",20),u._uU(34,"\u0418\u043d\u0434\u0435\u043a\u0441"),u.qZA(),u._UZ(35,"input",21),u.qZA(),u.TgZ(36,"div",22)(37,"label",23),u._uU(38,"\u0410\u0434\u0440\u0435\u0441"),u.qZA(),u._UZ(39,"input",24),u.YNc(40,I,3,2,"div",13),u.qZA(),u.TgZ(41,"div",22)(42,"button",25),u._uU(43),u.qZA(),u.YNc(44,E,2,1,"div",26),u.qZA()()()}if(2&t){const e=u.oxw();u.xp6(3),u.Q6J("formGroup",e.orderForm),u.xp6(13),u.Q6J("ngIf",(null==e.name?null:e.name.invalid)&&((null==e.name?null:e.name.dirty)||(null==e.name?null:e.name.touched))),u.xp6(5),u.Q6J("ngIf",(null==e.lastName?null:e.lastName.invalid)&&((null==e.lastName?null:e.lastName.dirty)||(null==e.lastName?null:e.lastName.touched))),u.xp6(5),u.Q6J("ngIf",(null==e.phone?null:e.phone.invalid)&&((null==e.phone?null:e.phone.dirty)||(null==e.phone?null:e.phone.touched))),u.xp6(5),u.Q6J("ngIf",(null==e.country?null:e.country.invalid)&&((null==e.country?null:e.country.dirty)||(null==e.country?null:e.country.touched))),u.xp6(9),u.Q6J("ngIf",(null==e.address?null:e.address.invalid)&&((null==e.address?null:e.address.dirty)||(null==e.address?null:e.address.touched))),u.xp6(2),u.Q6J("disabled",e.isSubmit||e.orderForm.invalid),u.xp6(1),u.hij(" ",e.isSubmit?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f...":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"," "),u.xp6(1),u.Q6J("ngIf",e.errorMessage)}}function U(t,r){1&t&&(u.TgZ(0,"div",30),u._uU(1," \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437! "),u.qZA())}const J=[{path:"",component:(()=>{class t{constructor(e,l,a,M){this.fb=e,this.teaDataService=l,this.teaCatalogService=a,this.route=M,this.teaCard=null,this.subscriptionOrder=null,this.responseSuccess=!1,this.errorMessage=null,this.isSubmit=!1,this.orderForm=this.fb.group({})}ngOnInit(){this.initForm(),this.setTeaProductValue()}initForm(){this.orderForm=this.fb.group({product:[{value:"",disabled:!0}],comment:[""],name:["",[n.kI.required,t=>/^[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451]+$/.test(t.value)?null:{lettersOnly:{value:t.value}}]],last_name:["",[n.kI.required,t=>/^[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451]+$/.test(t.value)?null:{lettersOnly:{value:t.value}}]],phone:["",[n.kI.required,t=>{const r=t.value;return/^\+?\d{0,1}(\d{10})$/.test(r)?null:{phoneInvalid:{value:r}}}]],country:["",[n.kI.required,t=>/^[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u0451]+$/.test(t.value)?null:{lettersOnly:{value:t.value}}]],zip:["",n.kI.required],address:["",[n.kI.required,t=>/[^A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u04510-9\s\-\/]/.test(t.value)?{addressInvalid:{value:t.value}}:null]]})}setTeaProductValue(){this.route.queryParams.subscribe(e=>{if(e.tea){const l=decodeURIComponent(e.tea.replace(/\+/g," "));this.orderForm.controls.product.setValue(l)}}),this.orderForm.value.product||(this.teaCard=this.teaDataService.getTeaCard(),this.teaCard&&this.orderForm.controls.product.setValue(this.teaCard.title))}onSubmit(){if(this.orderForm.invalid||this.isSubmit)return;this.isSubmit=!0,this.errorMessage=null;const e={...this.orderForm.value,product:this.orderForm.get("product")?.value};this.subscriptionOrder=this.teaCatalogService.createOrder(e).subscribe({next:()=>{this.responseSuccess=!0,this.isSubmit=!1,this.orderForm.reset()},error:l=>{this.errorMessage=l.message||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0437\u0430\u043a\u0430\u0437\u0430",this.isSubmit=!1}})}get name(){return this.orderForm.get("name")}get lastName(){return this.orderForm.get("last_name")}get phone(){return this.orderForm.get("phone")}get country(){return this.orderForm.get("country")}get address(){return this.orderForm.get("address")}get zip(){return this.orderForm.get("zip")}ngOnDestroy(){this.subscriptionOrder&&this.subscriptionOrder.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(n.qu),u.Y36(_.d),u.Y36(f.d),u.Y36(i.gz))},t.\u0275cmp=u.Xpm({type:t,selectors:[["create-order-component"]],decls:5,vars:2,consts:[[1,"form","d-flex","justify-content-center","align-items-center","flex-column","min-vh-100"],[1,"card","p-4",2,"width","100%","max-width","600px"],[4,"ngIf","ngIfElse"],["successMessage",""],["id","alluring-top","data-wow-duration","2s","data-wow-iteration","100",1,"h2","text-center","wow","fadeOut"],["id","order-form",1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-6"],["for","tea",1,"form-label"],["type","text","id","tea","formControlName","product","readonly","",1,"form-control"],["for","comment",1,"form-label"],["id","comment","formControlName","comment",1,"form-control"],["for","firstName",1,"form-label"],["type","text","id","firstName","formControlName","name",1,"form-control"],[4,"ngIf"],["for","lastName",1,"form-label"],["type","text","id","lastName","formControlName","last_name",1,"form-control"],["for","phone",1,"form-label"],["type","text","id","phone","formControlName","phone",1,"form-control"],["for","country",1,"form-label"],["type","text","id","country","formControlName","country",1,"form-control"],["for","postalCode",1,"form-label"],["type","text","id","postalCode","formControlName","zip",1,"form-control"],[1,"col-12"],["for","address",1,"form-label"],["type","text","id","address","formControlName","address",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["class","alert alert-danger text-center",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"alert","alert-danger","text-center"],[1,"alert","alert-success","text-center"]],template:function(e,l){if(1&e&&(u.TgZ(0,"section",0)(1,"div",1),u.YNc(2,B,45,9,"div",2),u.YNc(3,U,2,0,"ng-template",null,3,u.W1O),u.qZA()()),2&e){const a=u.MAs(4);u.xp6(2),u.Q6J("ngIf",!l.responseSuccess)("ngIfElse",a)}},dependencies:[c.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:["input.ng-invalid.ng-dirty[_ngcontent-%COMP%], input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}input.ng-invalid.ng-dirty[_ngcontent-%COMP%] + label[_ngcontent-%COMP%], input.ng-invalid.ng-touched[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:red}"]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[i.Bz.forChild(J),i.Bz]}),t})(),D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[c.ez,n.UX,i.Bz,n.u5,Y]}),t})()}}]);